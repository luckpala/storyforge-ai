# Windows 防火墙配置说明

## 问题
如果手机无法访问电脑上的数据服务器（端口 8765），可能是 Windows 防火墙阻止了连接。

## 解决方案

### 方法一：自动配置（推荐）

1. **右键点击** `配置防火墙_允许数据服务器.bat`
2. 选择 **"以管理员身份运行"**
3. 脚本会自动添加防火墙规则

### 方法二：手动配置

#### 步骤 1：打开 Windows Defender 防火墙

1. 按 `Win + R` 打开运行对话框
2. 输入 `wf.msc` 并按回车
3. 或者：控制面板 → 系统和安全 → Windows Defender 防火墙 → 高级设置

#### 步骤 2：添加入站规则

1. 在左侧选择 **"入站规则"**
2. 在右侧点击 **"新建规则..."**
3. 选择 **"端口"** → 下一步
4. 选择 **"TCP"**，输入端口 **8765** → 下一步
5. 选择 **"允许连接"** → 下一步
6. 勾选所有配置文件（域、专用、公用）→ 下一步
7. 输入名称：**StoryForge 数据服务器** → 完成

#### 步骤 3：验证规则

1. 在"入站规则"列表中查找 **"StoryForge 数据服务器"**
2. 确认规则状态为 **"已启用"**

## 测试连接

配置完成后，在手机浏览器中访问：
```
http://192.168.50.167:8765/api/health
```

如果看到 `{"status":"ok"}` 响应，说明配置成功。

## 注意事项

- 确保手机和电脑在**同一局域网**内
- 确保数据服务器已启动并监听 `0.0.0.0:8765`（不是 `127.0.0.1`）
- 如果仍有问题，检查路由器设置，确保没有阻止设备间通信

## 删除规则（如需要）

如果需要删除防火墙规则：

1. 打开 Windows Defender 防火墙高级设置
2. 选择"入站规则"
3. 找到"StoryForge 数据服务器"规则
4. 右键 → 删除

或使用命令行（需要管理员权限）：
```cmd
netsh advfirewall firewall delete rule name="StoryForge 数据服务器"
```








































